<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/webflow http://www.springframework.org/schema/webflow/spring-webflow-2.4.xsd"
      start-state="list">
    <var name="data" class="larisa.jsf.data.AccountDataModel"/>
    <var name="entity" class="larisa.entity.Account"/>
    <var name="service" class="larisa.jsf.service.impl.AccountServiceImpl"/>
    <var name="customerService" class="larisa.jsf.service.impl.CustomerServiceImpl"/>
    <view-state id="list" view="list.xhtml">
        <transition on="edit" to="edit">
        </transition>
        <transition on="prepare-delete">
        </transition>
        <transition on="delete">
            <evaluate expression="service.delete(entity)"/>
        </transition>
    </view-state>
    <subflow-state id="edit" subflow="admin/account/edit">
        <input name="entity" type="larisa.entity.Account" required="true"/>
        <transition on="edit-canceled" to="list"/>
        <transition on="edit-confirmed" to="list"/>
    </subflow-state>
    <global-transitions>
        <transition on="new" to="edit">
            <evaluate expression="service.createNewInstance()" result="entity"/>
        </transition>
    </global-transitions>
</flow>