<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/layout/base-template.xhtml"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="header">
        <h:outputText value="#{msg['productType.editing']}"/>
    </ui:define>
    <ui:define name="content">
        <h:form>
            <ui:include src="toolbar.xhtml"/>
            <ui:include src="inputs.xhtml"/>
            <ui:include src="toolbar.xhtml"/>
            <p:commandButton value="upload" action="prepare-fileupload" process="@this" update=":uploadForm"
                             oncomplete="PF('fileUploadDialog').show()"></p:commandButton>
        </h:form>
        <p:dialog widgetVar="fileUploadDialog">
            <h:form id="uploadForm" enctype="multipart/form-data">
                <p:fileUpload oncomplete="PF('fileUploadDialog').hide()"
                              update="@all"
                              cancelLabel="#{msg['cancel']}"
                              uploadLabel="#{msg['upload']}"
                              label="#{msg['choose']}"
                              fileUploadListener="#{uploader.handleFileUpload}" auto="true"
                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/">

                </p:fileUpload>

            </h:form>
        </p:dialog>
        <p:graphicImage value="#{servletContext.contextPath}/spring/file/#{entity.file.id}"/>
        <ui:include src="delete.xhtml"/>
    </ui:define>

</ui:composition>