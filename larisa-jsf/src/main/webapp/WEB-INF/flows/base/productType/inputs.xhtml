<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
>
    <h:outputScript library="js" name="ui-galleria-panel.js"/>

    <f:event listener="#{circleHierarchicalValidator.validate}" type="postValidate"/>
    <p:panelGrid columns="2" columnClasses="labelClass" style="width: 100%">
        <p:outputLabel rendered="#{productTypeEditor.selected['new']}" for="canEdit" value="Редактировать код:"/>
        <p:selectBooleanCheckbox rendered="#{productTypeEditor.selected['new']}" id="canEdit" value="#{productTypeEditor.canEditId}">
            <p:ajax update="@parent"/>
        </p:selectBooleanCheckbox>
        <p:outputLabel for="id" value="Код:"/>
        <p:inputText disabled="#{not productTypeEditor.canEditId or not productTypeEditor.selected['new']}" id="id"
                     value="#{productTypeEditor.selected.id}"/>
        <p:outputLabel for="name" value="Наименование:"/>
        <p:inputText id="name" value="#{productTypeEditor.selected.name}" style="width: 100%" required="true"
                     requiredMessage="Наименование продукта обязательно для заполнения"/>
        <p:outputLabel for="volume" value="Объем:"/>
        <p:inputText id="volume" value="#{productTypeEditor.selected.volumeNote}" style="width: 100%"/>
        <p:outputLabel for="maker" value="Производитель:"/>
        <p:autoComplete required="false"
                        id="maker" value="#{productTypeEditor.selected.maker}"
                        converter="#{makerEditor}"
                        style="width: 100%"
                        inputStyle="width: 90%"
                        completeMethod="#{makerService.findByMask}"
                        requiredMessage="Поле 'Производитель' обязательно для заполнения"
                        var="e"
                        itemValue="#{e}"
                        itemLabel="#{e.name}"
                        dropdown="true">
            <p:ajax event="query" global="false"/>
        </p:autoComplete>
        <p:outputLabel for="sertificated" value="Срок сертификации:"/>
        <p:calendar id="sertificated"
                    value="#{productTypeEditor.selected.sertificated}"
                    converter="#{localDateConverter}"
                    pattern="dd.MM.yy"
                    size="#{msg.dateSize}"
                    maxlength="#{msg.dateSize}"
                    required="false"
                    requiredMessage="Поле 'Срок сертификации' обязательно для заполнения"/>
        <p:outputLabel for="childs" value="Детки:"/>
        <p:autoComplete id="childs"
                        binding="#{circleHierarchicalValidator.childsInput}"
                        value="#{productTypeEditor.selected.childs}"
                        converter="#{productTypeEditor}"
                        completeMethod="#{productTypeService.findByMask}"
                        itemLabel="#{e.name}"
                        itemValue="#{e}"
                        var="e"
                        multiple="true"

                        >
            <f:attribute value="#{productTypeEditor.selected}" name="entity"/>
            <p:ajax event="query" global="false"/>
        </p:autoComplete>
        <p:outputLabel for="parents" value="Предки:"/>
        <p:autoComplete id="parents"
                        binding="#{circleHierarchicalValidator.parentsInput}"
                        value="#{productTypeEditor.selected.parents}"
                        converter="#{productTypeEditor}"
                        completeMethod="#{productTypeService.findByMask}"
                        itemLabel="#{e.name}"
                        itemValue="#{e}"
                        var="e"
                        multiple="true"
                       >
            <f:attribute value="#{productTypeEditor.selected}" name="entity"/>
            <p:ajax event="query" global="false"/>
        </p:autoComplete>
    </p:panelGrid>


    <!--<p:contentFlow value="#{productTypeEditor.selected.files}" var="f">
        <p:graphicImage  value="/spring/file/#{f.id}" styleClass="content"/>
    </p:contentFlow>-->
</ui:composition>